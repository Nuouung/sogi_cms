<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

    <head th:replace="~{admin/common/head :: head}"></head>
    <body id="page-top">


        <main id="wrapper">

            <!-- Sidebar -->
            <ul th:replace="~{admin/common/left :: left}"></ul>
            <!-- End of Sidebar -->

            <!-- Content Wrapper -->
            <div id="content-wrapper" class="d-flex flex-column">

                <!-- Main Content -->
                <div id="content">

                    <!-- Topbar -->
                    <nav th:replace="~{admin/common/topbar :: topbar}"></nav>
                    <!-- End of Topbar -->

                    <!-- Begin Page Content -->
                    <div class="container-xl px-4 mt-4">
                        <form
                            id="archiveCreateUpdateForm"
                            th:object="${archiveCreateUpdateDto}"
                            th:action="${requestURI}"
                            method="post"
                            enctype="multipart/form-data">

                            <!--<textarea id="editor"></textarea>
                            <script>
                                ClassicEditor.create(document.querySelector('#editor'), {
                                    language: 'ko'
                                });
                            </script>-->

                            <div class="row">
                                <div class="col-xl-8">
                                    <!-- Account details card-->
                                    <div class="card mb-4">
                                        <div class="card-header">Archive Category Details</div>
                                        <div class="card-body">
                                            <div th:if="${formMode eq 'UPDATE'}">
                                                <input type="hidden" th:field="*{id}">
                                            </div>
                                            <input type="hidden" name="archiveCategoryId" th:value="${archiveCategory.id}">
                                            <div class="mb-3">
                                                <label class="small mb-1">제목</label>
                                                <input
                                                        type="text"
                                                        th:field="*{title}"
                                                        class="form-control"
                                                        placeholder="제목을 입력해주세요."/>
                                                <div class="error_message" th:errors="*{title}"></div>
                                            </div>
                                            <div class="mb-3">
                                                <label class="small mb-1">본문</label>
                                                <input
                                                        type="text"
                                                        th:field="*{contentHtml}"
                                                        class="contentHtml form-control"
                                                        placeholder="내용을 작성해주세요."/>
                                                <div class="error_message" th:errors="*{contentHtml}"></div>
                                            </div>
                                            <div class="mb-3">
                                                <label class="small mb-1">본문 요약</label>
                                                <textarea
                                                        type="text"
                                                        th:field="*{contentSummary}"
                                                        class="form-control"
                                                        placeholder="내용을 작성해주세요." style="height: 100px;"/>
                                                <div class="error_message" th:errors="*{contentSummary}"></div>
                                            </div>
                                            <div class="mb-3">
                                                <label class="small mb-1">첨부파일</label>
                                                <input type="file" id="multipartFileList" name="multipartFileList" multiple>
                                                <div class="error_message" th:errors="*{multipartFileList}"></div>
                                            </div>
                                            <button class="btn btn-primary" th:if="${formMode eq 'INSERT'}" onclick="clickSubmitButton()">등록</button>
                                            <button class="btn btn-primary" th:if="${formMode eq 'UPDATE'}" type="submit">수정</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <script>
                            let contentHtmlEditor;
                            ClassicEditor
                                .create(document.querySelector('.contentHtml'))
                                .then(e => {
                                    contentHtmlEditor = e;
                                });

                            function clickSubmitButton() {
                                document.getElementById('contentHtml').value = contentHtmlEditor.getData();
                                document.getElementById('archiveCreateUpdateForm').submit();
                            }
                        </script>
                    </div>
                    <!-- /.container-fluid -->

                </div>
                <!-- End of Main Content -->

                <!-- Footer -->
                <footer th:replace="~{admin/common/footer :: footer}"></footer>
                <!-- End of Footer -->

            </div>
            <!-- End of Content Wrapper -->

        </main>
        <!-- End of Page Wrapper -->

        <!-- Scroll to Top Button-->
        <a th:replace="~{admin/common/include :: scroll_to_top_botton}"></a>

        <!-- Logout Modal-->
        <div th:replace="~{admin/common/include :: logout_modal}"></div>

        <!-- Bootstrap core JavaScript-->
        <script src="/vendor/jquery/jquery.min.js"></script>
        <script src="/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

        <!-- Core plugin JavaScript-->
        <script src="/vendor/jquery-easing/jquery.easing.min.js"></script>

        <!-- Custom scripts for all pages-->
        <script src="/js/sb-admin-2.min.js"></script>

        <!-- Page level plugins -->

        <!-- Page level custom scripts -->

    </body>

</html>